<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>


</head>

<body>
<main class="container py-5">
    <div class="row row-cols-1 row-cols-md-3 mb-3 text-center ">
        <div>Data from Backend:</div>
        <div>
            <label for="dataValues"></label>
            <textarea id="dataValues"></textarea>
        </div>

    </div>
    <div class="row row-cols-1 row-cols-md-3 mb-3 text-center ">
        <div>Data Set to Backend:</div>
        <div>
            <label for="rpm_duty">RPM Duty</label>
            <input type="range" class="form-range changeable_data" min="0" max="65555" id="rpm_duty"/>
            <label for="rpm_freq">RPM Freq</label>
            <input type="range" class="form-range changeable_data" min="0" max="65555" id="rpm_freq"/>
        </div>

    </div>
</main>


<script src="assets/jquery-3.6.3.min.js"></script>

<script>
  jQuery('.changeable_data').change(function() {

    var elements = {};
    $('.changeable_data').each(function(index) {
      var inputElement = $(this);
      var name = inputElement.attr('id');
      var value = inputElement.val();
      elements[name] = value;
    });
    console.log(elements);
    $.ajax('api/setData', {
      data: JSON.stringify(elements),
      contentType: 'application/json',
      type: 'POST',
    }, function () {

    })


  });

  function convertValue(val) {
    val = val * (3.3 / 65535);
  }

  setInterval(function() {
    jQuery.getJSON('api/data.json', function(data) {
      var json = JSON.stringify(data);
      jQuery('#dataValues').val(json);

    });
  }, 1000);
  //
</script>
</body>

</html>
